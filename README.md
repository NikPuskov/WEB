# WEB

----------------------------------------------------------------------------------------------

Цель домашнего задания:

- Получить практические навыки в настройке инфраструктуры с помощью манифестов и конфигураций;

- Отточить навыки использования ansible/vagrant/docker.

----------------------------------------------------------------------------------------------

Описание домашнего задания:

Варианты стенда:

- nginx + php-fpm (laravel/wordpress) + python (flask/django) + js(react/angular);

- nginx + java (tomcat/jetty/netty) + go + ruby;

- свои комбинации

Реализации на выбор:

- на хостовой системе через конфиги в /etc;

- деплой через docker-compose.

-----------------------------------------------------------------------------------------------

Выполнение домашнего задания:

Будем использовать вариант стенда "nginx + php-fpm (wordpress) + python (django) + js(node.js)"

В данном репозитории собранные все необходимые файлы для автоматической настройки стенда. Описание каталогов и файлов ниже.

- файл Vagrantfile - содержит описание создания виртуальной машины на Ubuntu 22.04. На этой виртуальной машине в дальнейшем будем запускать docker-контейнеры

- файл provision.yml - плейбук для Ansible, с помощью которого устанавливается Docker и отдается команда на запуск docker контейнеров

- каталог project - содержит необходимые файлы для запуска docker-контейнеров

- каталог project/nginx-conf - конфигурационные файлы nginx для обработки запросов к django, nodejs и wordpress

- каталог project/node - содержит файл с настройками для node.js

- каталог project/python - содержит файлы с настройками Django приложения

- файл project/docker-compose.yml - содержит описание запуска docker-контейнеров

- файл .env - содержит список переменных, которые используются при создании контейнеров

После развёртывания стенда имеем виртуальную машину с именем DynamicWeb, на которой хостятся 5 докер контейнеров:

image1

Веб-сервер nginx принимает запросы по tcp портам 8081-8083, и проксирует их на сервера wordpress, node, project_app (django). Статика wordpress не проксируется, обрабатывается самим nginx.

В качестве базы данных для Wordpress используется MariaDB.

Дополнительные команды, которые использовались при выполнении домашнего задания:

`docker ps` - список запущенных контейнеров

`docker rm --force <id>` - удалить запущенный контейнер

`docker-compose up -d <service>` - запустить только указанный сервис из docker-compose.yml

`docker-compose logs` - посмотреть логи сервисов
